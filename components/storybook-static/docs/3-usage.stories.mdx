import { Meta, Story, Canvas } from '@storybook/addon-docs/blocks'

<Meta title="Usage" />

# Usage

Here, we example how to leverage this Web Component library in your projects.

### Overview

We went back and forth with the idea of having a solid Web Component library in it's own repository vs. where it is today, in a `components/` folder within the `DNA` Shopify theme. Overall, we sselected the current approach after breaking down some anticipated developer journey's and pain points. Considerations:

- What if a global component needs to be customized for a project?
- What is the simpliest approach to understand for a new developer?
- How can we best share dependencies between a global system and a Shopify theme?
- How can we manage the performance of consuming a global system? ie. have the browser only request the needed components rather than all components.

**Other Benefits:**

- Every client project can have it's own Storybook implement as an optional add-on
- Storybook can act as a documentation hub
- Developers can write project-specific components without having to know liquid
- Developers can think carefully about the APIs of their web components

Using the Web Componenent library in the Shopify theme is extremely simple:

- `yarn start` > Develop using Storybook
- `yarn build` > Build Storybook, easy deploy to Vercel etc
- `yarn watch` > Develop components and copy to Shopify theme
- `yarn bundle` > Compile components and add to Shopify theme

### Common Workflow

A common workflow for writing or editing global components is to:

- Open 1 terminal and run `cd components && yarn watch`
- Open another terminal and run `shopify theme serve`

The Esbuild process is more or less instantanious.

> _You can also use this process of editing or adding to the JS helper utilities or the global CSS system._

### Writing Lit Components in the Shopify theme

Using Lit and other dependencies in the Shopify theme could not be easier:

```js
// assets/component-example.js
import { LitElement, html, css, utils } from './-global.min.js'

// Access ultility functions
const { one, all, toggle } = utils || {}

class HHExampleComponent extends LitElement {
  static properties = {}

  constructor() {
    super()
  }

  render() {
    return html``
  }

  static styles = css``
}

customElements.define('hh-example-component', HHExampleComponent)
```

To see, and add to, what is exported from `-global.min.js`, check out the `components/src/global.js` file.

> _Note that JS utilities are also added to the global `HH` window object._

### Styling Global Components

See the `components/src/styles/components.css` file. All our global web components have been written, or should be written, to anticipate and allow for CSS Variable driven configuration:

```css
hh-button {
  --hh-border-bottom-offset: -2px;
}

hh-details-modal {
  --hh-top: 100%;
  --hh-height: 100%;
  --hh-background: var(--hh-color-background);
}
```
